function fuseStrings(s1, s2) {
    const words1 = s1.split(' ');
    const words2 = s2.split(' ');

    // 1. Find Longest Common Prefix
    let i = 0;
    while (i < words1.length && i < words2.length && words1[i] === words2[i]) {
        i++;
    }
    const prefix = words1.slice(0, i).join(' ');

    // 2. Find Longest Common Suffix
    let j = 0;
    while (j < (words1.length - i) && j < (words2.length - i) && 
           words1[words1.length - 1 - j] === words2[words2.length - 1 - j]) {
        j++;
    }
    const suffix = words1.slice(words1.length - j).join(' ');

    // 3. Extract the unique middles
    const middle1 = words1.slice(i, words1.length - j).join(' ');
    const middle2 = words2.slice(i, words2.length - j).join(' ');

    // 4. Combine
    return [prefix, middle1, middle2, suffix].filter(s => s !== "").join(' ');
}

console.log(fuseStrings('a is apple', 'a for apple')); 
// Result: "a is for apple"




// for encryption

const crypto = require('crypto');
const algorithm = 'aes-256-cbc';
const key = Buffer.from(process.env.ENCRYPTION_KEY, 'hex'); // 32 bytes

function encrypt(text) {
    const iv = crypto.randomBytes(16);
    const cipher = crypto.createCipheriv(algorithm, key, iv);
    let encrypted = cipher.update(text);
    encrypted = Buffer.concat([encrypted, cipher.final()]);
    // We store the IV with the data so we can decrypt it later
    return iv.toString('hex') + ':' + encrypted.toString('hex');
}

function decrypt(text) {
    const textParts = text.split(':');
    const iv = Buffer.from(textParts.shift(), 'hex');
    const encryptedText = Buffer.from(textParts.join(':'), 'hex');
    const decipher = crypto.createDecipheriv(algorithm, key, iv);
    let decrypted = decipher.update(encryptedText);
    decrypted = Buffer.concat([decrypted, decipher.final()]);
    return decrypted.toString();
}